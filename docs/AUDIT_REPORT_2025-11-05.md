# APIä»•æ§˜æ›¸ã¨å®Ÿè£…ã®å·®ç•°èª¿æŸ»ãƒ¬ãƒãƒ¼ãƒˆ

**èª¿æŸ»æ—¥**: 2025-11-05
**å¯¾è±¡**: /docs/spec vs ç¾è¡Œã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰
**èª¿æŸ»é …ç›®**:
1. APIä»•æ§˜æ›¸ã¨å®Ÿè£…ã®å·®ç•°
2. ãƒ‡ãƒ¼ã‚¿å–å¾—æ™‚ã®limitãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®è¨˜è¼‰çŠ¶æ³

---

## ğŸ“‹ èª¿æŸ»çµæœã‚µãƒãƒªãƒ¼

### âœ… å®Ÿè£…æ¸ˆã¿ãƒ»ä»•æ§˜æ›¸è¨˜è¼‰ã‚ã‚Š

ä»¥ä¸‹ã®APIã¯ä»•æ§˜æ›¸ã«è¨˜è¼‰ãŒã‚ã‚Šã€å®Ÿè£…ã‚‚å®Œäº†ã—ã¦ã„ã¾ã™ï¼š

#### èªè¨¼API (06-Auth-API.md)
- âœ… `POST /api/auth/login` - å®Ÿè£…ã‚ã‚Šã€ä»•æ§˜æ›¸è¨˜è¼‰ã‚ã‚Š
- âœ… `POST /api/auth/refresh` - å®Ÿè£…ã‚ã‚Šã€ä»•æ§˜æ›¸è¨˜è¼‰ã‚ã‚Š

#### è·å“¡API (07-Staff-API.md)
- âœ… `GET /api/staffs/me` - å®Ÿè£…ã‚ã‚Šã€ä»•æ§˜æ›¸è¨˜è¼‰ã‚ã‚Š
- âœ… `PATCH /api/staffs/me` - å®Ÿè£…ã‚ã‚Šã€ä»•æ§˜æ›¸è¨˜è¼‰ã‚ã‚Š
- âœ… `POST /api/staffs/me/pin` - å®Ÿè£…ã‚ã‚Šã€ä»•æ§˜æ›¸è¨˜è¼‰ã‚ã‚Š

#### äºˆç´„API (08-Reservation-API.md)
- âœ… `GET /api/reservations/check` - å®Ÿè£…ã‚ã‚Šã€ä»•æ§˜æ›¸è¨˜è¼‰ã‚ã‚Š
- âœ… `POST /api/reservations` - å®Ÿè£…ã‚ã‚Šã€ä»•æ§˜æ›¸è¨˜è¼‰ã‚ã‚Š
- âœ… `DELETE /api/reservations/:id` - å®Ÿè£…ã‚ã‚Šã€ä»•æ§˜æ›¸è¨˜è¼‰ã‚ã‚Š

#### ç®¡ç†è€…API - CSVä¸€æ‹¬ç™»éŒ² (09-Admin-API.md)
- âœ… `POST /api/admin/staffs/import` - å®Ÿè£…ã‚ã‚Šã€ä»•æ§˜æ›¸è¨˜è¼‰ã‚ã‚Š (9.3)

#### ç®¡ç†è€…API - äºˆç´„ç¨®åˆ¥ç®¡ç† (09-Admin-API.md)
- âœ… `POST /api/admin/reservation-types` - å®Ÿè£…ã‚ã‚Šã€ä»•æ§˜æ›¸è¨˜è¼‰ã‚ã‚Š (9.4)
- âœ… `GET /api/admin/reservation-types` - å®Ÿè£…ã‚ã‚Šã€ä»•æ§˜æ›¸è¨˜è¼‰ã‚ã‚Š (9.8)
- âœ… `GET /api/admin/reservation-types/:id` - å®Ÿè£…ã‚ã‚Šã€ä»•æ§˜æ›¸è¨˜è¼‰ã‚ã‚Š (9.9)
- âœ… `PATCH /api/admin/reservation-types/:id` - å®Ÿè£…ã‚ã‚Šã€ä»•æ§˜æ›¸è¨˜è¼‰ã‚ã‚Š (9.10)
- âœ… `DELETE /api/admin/reservation-types/:id` - å®Ÿè£…ã‚ã‚Šã€ä»•æ§˜æ›¸è¨˜è¼‰ã‚ã‚Š (9.11)

#### ç®¡ç†è€…API - äºˆç´„æ ç®¡ç† (09-Admin-API.md)
- âœ… `POST /api/admin/slots/bulk` - å®Ÿè£…ã‚ã‚Šã€ä»•æ§˜æ›¸è¨˜è¼‰ã‚ã‚Š (9.5)
- âœ… `GET /api/admin/slots` - å®Ÿè£…ã‚ã‚Šã€ä»•æ§˜æ›¸è¨˜è¼‰ã‚ã‚Š (9.20)
- âœ… `PATCH /api/admin/slots/:id` - å®Ÿè£…ã‚ã‚Šã€ä»•æ§˜æ›¸è¨˜è¼‰ã‚ã‚Š (9.21)
- âœ… `POST /api/admin/slots/:id/departments` - å®Ÿè£…ã‚ã‚Šã€ä»•æ§˜æ›¸è¨˜è¼‰ã‚ã‚Š (9.12)
- âœ… `PATCH /api/admin/slots/:slotId/departments/:deptId` - å®Ÿè£…ã‚ã‚Šã€ä»•æ§˜æ›¸è¨˜è¼‰ã‚ã‚Š (9.13)
- âœ… `DELETE /api/admin/slots/:slotId/departments/:deptId` - å®Ÿè£…ã‚ã‚Šã€ä»•æ§˜æ›¸è¨˜è¼‰ã‚ã‚Š (9.14)

#### ç®¡ç†è€…API - äºˆç´„ç®¡ç† (09-Admin-API.md)
- âœ… `GET /api/admin/reservations` - å®Ÿè£…ã‚ã‚Šã€ä»•æ§˜æ›¸è¨˜è¼‰ã‚ã‚Š (9.22)
- âœ… `DELETE /api/admin/reservations/:id` - å®Ÿè£…ã‚ã‚Šã€ä»•æ§˜æ›¸è¨˜è¼‰ã‚ã‚Š (9.23)

#### ç®¡ç†è€…API - è·å“¡ç®¡ç† (09-Admin-API.md)
- âœ… `GET /api/admin/staffs` - å®Ÿè£…ã‚ã‚Šã€ä»•æ§˜æ›¸è¨˜è¼‰ã‚ã‚Š (9.24)
- âœ… `PATCH /api/admin/staffs/:staffUid` - å®Ÿè£…ã‚ã‚Šã€ä»•æ§˜æ›¸è¨˜è¼‰ã‚ã‚Š (9.17)
- âœ… `POST /api/admin/staffs/:staffUid/reset-pin` - å®Ÿè£…ã‚ã‚Šã€ä»•æ§˜æ›¸è¨˜è¼‰ã‚ã‚Š (9.18)
- âœ… `POST /api/admin/staffs/:staffUid/unlock` - å®Ÿè£…ã‚ã‚Šã€ä»•æ§˜æ›¸è¨˜è¼‰ã‚ã‚Š (9.25)

#### ç®¡ç†è€…API - éƒ¨ç½²ç®¡ç† (09-Admin-API.md)
- âœ… `GET /api/admin/departments` - å®Ÿè£…ã‚ã‚Šã€ä»•æ§˜æ›¸è¨˜è¼‰ã‚ã‚Š (9.6)
- âœ… `GET /api/admin/departments/:id` - å®Ÿè£…ã‚ã‚Šã€ä»•æ§˜æ›¸è¨˜è¼‰ã‚ã‚Š (9.7)
- âœ… `POST /api/admin/departments` - å®Ÿè£…ã‚ã‚Šã€ä»•æ§˜æ›¸è¨˜è¼‰ã‚ã‚Š (9.26)
- âœ… `PATCH /api/admin/departments/:id` - å®Ÿè£…ã‚ã‚Šã€ä»•æ§˜æ›¸è¨˜è¼‰ã‚ã‚Š (9.27)

---

## ğŸ” Limitãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®è¨˜è¼‰çŠ¶æ³

### âœ… ä»•æ§˜æ›¸ã«è¨˜è¼‰ã‚ã‚Šã€å®Ÿè£…ã‚‚æ­£ã—ãå‹•ä½œ

ä»¥ä¸‹ã®APIã¯limitãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãŒä»•æ§˜æ›¸ã«è¨˜è¼‰ã•ã‚Œã¦ãŠã‚Šã€å®Ÿè£…ã‚‚å®Œäº†ã—ã¦ã„ã¾ã™ï¼š

| API | ä»•æ§˜æ›¸ã‚»ã‚¯ã‚·ãƒ§ãƒ³ | Limitè¨˜è¼‰ | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ | æœ€å¤§å€¤ | å®Ÿè£…çŠ¶æ³ |
|-----|----------------|----------|----------|--------|---------|
| `GET /api/admin/departments` | 9.6 | âœ… | 50 | 100 | âœ… å®Ÿè£…æ¸ˆã¿ |
| `GET /api/admin/reservation-types` | 9.8 | âœ… | 50 | 100 | âœ… å®Ÿè£…æ¸ˆã¿ |
| `GET /api/admin/slots` | 9.20 | âœ… | 50 | 100 | âœ… å®Ÿè£…æ¸ˆã¿ |
| `GET /api/admin/reservations` | 9.22 | âœ… | 50 | 100 | âœ… å®Ÿè£…æ¸ˆã¿ |
| `GET /api/admin/staffs` | 9.24 | âœ… | 50 | 100 | âœ… å®Ÿè£…æ¸ˆã¿ |

#### å®Ÿè£…è©³ç´°

ã™ã¹ã¦ã®ç®¡ç†è€…APIã®ãƒªã‚¹ãƒˆå–å¾—ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã§ã€ä»¥ä¸‹ã®å…±é€šãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãŒå®Ÿè£…ã•ã‚Œã¦ã„ã¾ã™ï¼š

```typescript
// å…±é€šã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
{
  limit: number = 50,    // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 50
  page: number = 1,      // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 1
  // @Min(1), @Max(100) ã«ã‚ˆã‚‹ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
}
```

**ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè£…**:
- `limit`: 1ã€œ100ã®ç¯„å›²ã§æŒ‡å®šå¯èƒ½ï¼ˆDTOã§`@Min(1)`, `@Max(100)`ï¼‰
- `page`: 1ä»¥ä¸Šã®æ•´æ•°ï¼ˆDTOã§`@Min(1)`ï¼‰
- ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤: limit=50, page=1

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹å½¢å¼**:
```json
{
  "data": [...],
  "meta": {
    "total": 100,
    "page": 1,
    "limit": 50
  }
}
```

### å®Ÿè£…ç®‡æ‰€ã®ç¢ºèª

#### 1. `GET /api/admin/departments`
- **ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼**: `src/department/admin-department.controller.ts:27-83`
- **DTO**: `src/department/dto/find-departments-admin.dto.ts:12-18`
- **ä»•æ§˜æ›¸**: `docs/spec/09-Admin-API.md:709-787`
- âœ… limit, page, name, active, sort, order ã™ã¹ã¦å®Ÿè£…æ¸ˆã¿

#### 2. `GET /api/admin/reservation-types`
- **ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼**: `src/reservation-type/admin-reservation-type.controller.ts:38-93`
- **DTO**: `src/reservation-type/dto/find-reservation-types-admin.dto.ts:3-10`
- **ä»•æ§˜æ›¸**: `docs/spec/09-Admin-API.md:879-942`
- âœ… limit, page, name, active, sort, order ã™ã¹ã¦å®Ÿè£…æ¸ˆã¿

#### 3. `GET /api/admin/slots`
- **ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼**: `src/reservations/admin-slots.controller.ts:33-37`
- **DTO**: `src/reservations/dto/admin-slots.dto.ts:39-50`
- **ä»•æ§˜æ›¸**: `docs/spec/09-Admin-API.md:1874-1942`
- âœ… limit, page, reservationTypeId, status, serviceDateFrom, serviceDateTo, sort, order ã™ã¹ã¦å®Ÿè£…æ¸ˆã¿

#### 4. `GET /api/admin/reservations`
- **ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼**: `src/reservations/admin-reservations.controller.ts:23-27`
- **DTO**: `src/reservations/dto/admin-reservations.dto.ts:39-50`
- **ä»•æ§˜æ›¸**: `docs/spec/09-Admin-API.md:1989-2043`
- âœ… limit, page, staffId, reservationTypeId, status, serviceDateFrom, serviceDateTo, sort, order ã™ã¹ã¦å®Ÿè£…æ¸ˆã¿

#### 5. `GET /api/admin/staffs`
- **ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼**: `src/staff/admin-staff-token.controller.ts:22-26`
- **DTO**: `src/staff/dto/find-staffs-admin.dto.ts:17-28`
- **ä»•æ§˜æ›¸**: `docs/spec/09-Admin-API.md:2067-2112`
- âœ… limit, page, search, departmentId, status ã™ã¹ã¦å®Ÿè£…æ¸ˆã¿

---

## ğŸ“Œ å·®ç•°ãªã— - ä»•æ§˜æ›¸ã¨å®Ÿè£…ã¯å®Œå…¨ã«ä¸€è‡´

èª¿æŸ»ã®çµæœã€ä»¥ä¸‹ã®ç‚¹ãŒç¢ºèªã•ã‚Œã¾ã—ãŸï¼š

### 1. APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã®ä¸€è‡´
- ä»•æ§˜æ›¸ã«è¨˜è¼‰ã•ã‚Œã¦ã„ã‚‹ã™ã¹ã¦ã®APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆãŒå®Ÿè£…ã•ã‚Œã¦ã„ã‚‹
- å®Ÿè£…ã•ã‚Œã¦ã„ã‚‹ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã¯ã™ã¹ã¦ä»•æ§˜æ›¸ã«è¨˜è¼‰ã•ã‚Œã¦ã„ã‚‹
- **å·®ç•°ãªã—**

### 2. Limitãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®è¨˜è¼‰
- ãƒ‡ãƒ¼ã‚¿å–å¾—ã‚’ä¼´ã†ã™ã¹ã¦ã®ç®¡ç†è€…APIã«limitãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãŒè¨˜è¼‰ã•ã‚Œã¦ã„ã‚‹
- å®Ÿè£…ã§ã‚‚æ­£ã—ãlimitã€pageãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãŒå‹•ä½œã—ã¦ã„ã‚‹
- ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ï¼ˆlimit=50, page=1ï¼‰ã‚‚ä»•æ§˜æ›¸ã¨å®Ÿè£…ã§ä¸€è‡´
- æœ€å¤§å€¤ï¼ˆlimit=100ï¼‰ã‚‚ä»•æ§˜æ›¸ã¨å®Ÿè£…ã§ä¸€è‡´
- **å·®ç•°ãªã—**

### 3. ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®ä»•æ§˜
å„APIã®ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã€ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒœãƒ‡ã‚£ã€ãƒ¬ã‚¹ãƒãƒ³ã‚¹å½¢å¼ã‚‚ä»•æ§˜æ›¸é€šã‚Šã«å®Ÿè£…ã•ã‚Œã¦ã„ã‚‹

---

## âœ¨ è©•ä¾¡

### å„ªã‚Œã¦ã„ã‚‹ç‚¹

1. **å®Œå…¨ãªå®Ÿè£…ã‚«ãƒãƒ¬ãƒƒã‚¸**: ä»•æ§˜æ›¸ã«è¨˜è¼‰ã•ã‚ŒãŸã™ã¹ã¦ã®APIãŒå®Ÿè£…æ¸ˆã¿
2. **çµ±ä¸€ã•ã‚ŒãŸãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³**: ã™ã¹ã¦ã®ä¸€è¦§å–å¾—APIã§çµ±ä¸€ã•ã‚ŒãŸlimit/pageä»•æ§˜
3. **é©åˆ‡ãªãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³**: DTOãƒ¬ãƒ™ãƒ«ã§ã®å‹ãƒã‚§ãƒƒã‚¯ã€ç¯„å›²ãƒã‚§ãƒƒã‚¯ï¼ˆ@Min, @Maxï¼‰
4. **æ˜ç¢ºãªãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤**: limit=50, page=1 ã¨ã„ã†åˆç†çš„ãªãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®š
5. **é©åˆ‡ãªä¸Šé™è¨­å®š**: limitæœ€å¤§100ã«ã‚ˆã‚Šã€éåº¦ãªãƒ‡ãƒ¼ã‚¿å–å¾—ã‚’é˜²æ­¢

### ä»•æ§˜æ›¸ã®å“è³ª

- **è©³ç´°åº¦**: ã™ã¹ã¦ã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã«ã¤ã„ã¦ã€ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã€ãƒ¬ã‚¹ãƒãƒ³ã‚¹å½¢å¼ã€ã‚¨ãƒ©ãƒ¼ãŒè©³ç´°ã«è¨˜è¼‰
- **æ­£ç¢ºæ€§**: è¨˜è¼‰å†…å®¹ã¨å®Ÿè£…ãŒå®Œå…¨ã«ä¸€è‡´
- **æœ€æ–°æ€§**: æœ€çµ‚æ›´æ–°ãŒ2025-11-04ã§æœ€æ–°ã®å®Ÿè£…ã‚’åæ˜ 

---

## ğŸ¯ çµè«–

**èª¿æŸ»çµæœ**: **å·®ç•°ãªã—**

- âœ… ã™ã¹ã¦ã®APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆãŒä»•æ§˜æ›¸é€šã‚Šã«å®Ÿè£…ã•ã‚Œã¦ã„ã‚‹
- âœ… ãƒ‡ãƒ¼ã‚¿å–å¾—APIã«ã¯ã™ã¹ã¦é©åˆ‡ãªlimitãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãŒå®Ÿè£…ã•ã‚Œã¦ã„ã‚‹
- âœ… ä»•æ§˜æ›¸ã®è¨˜è¼‰å†…å®¹ã¨å®Ÿè£…ãŒå®Œå…¨ã«ä¸€è‡´ã—ã¦ã„ã‚‹
- âœ… ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã€ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã€ãƒ¬ã‚¹ãƒãƒ³ã‚¹å½¢å¼ã‚‚ã™ã¹ã¦ä¸€è‡´

### æ¨å¥¨äº‹é …

ç¾æ™‚ç‚¹ã§ä¿®æ­£ãŒå¿…è¦ãªå·®ç•°ã¯è¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚
ä»•æ§˜æ›¸ã¨å®Ÿè£…ã¯å®Œå…¨ã«åŒæœŸãŒå–ã‚Œã¦ãŠã‚Šã€å„ªã‚ŒãŸçŠ¶æ…‹ã‚’ä¿ã£ã¦ã„ã¾ã™ã€‚

ä»Šå¾Œã®ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã«ãŠã„ã¦ã¯ã€ä»¥ä¸‹ã®ç‚¹ã«æ³¨æ„ã—ã¦ãã ã•ã„ï¼š

1. **æ–°è¦APIè¿½åŠ æ™‚**: ä»•æ§˜æ›¸ã¸ã®è¨˜è¼‰ã‚’å¿˜ã‚Œãšã«è¡Œã†
2. **ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿å¤‰æ›´æ™‚**: ä»•æ§˜æ›¸ã¨å®Ÿè£…ã‚’åŒæ™‚ã«æ›´æ–°ã™ã‚‹
3. **å®šæœŸçš„ãªç›£æŸ»**: 3ã€œ6ãƒ¶æœˆã”ã¨ã«åŒæ§˜ã®å·®ç•°ãƒã‚§ãƒƒã‚¯ã‚’å®Ÿæ–½ã™ã‚‹

---

**èª¿æŸ»æ‹…å½“**: Claude
**èª¿æŸ»å®Œäº†æ—¥æ™‚**: 2025-11-05
